package UI;

import java.awt.Color;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;

import Control.CityPoly;
import Control.GameController;

/**
 *
 * @author Malab
 */
public class Ventana extends javax.swing.JFrame {

	/**
	 * Creates new form Ventana
	 */
	private GameController Game;
	public Ventana() {
		initComponents();
		RollDice.setVisible(false);


	}


	public GameController getGame() {
		return Game;
	}


	public void setGame(GameController game) {
		Game = game;
	}


	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed" desc="Generated Code">
	private void initComponents() {

		Puntaje1 = new javax.swing.JLabel();
		Username1 = new javax.swing.JLabel();
		Username2 = new javax.swing.JLabel();
		Puntaje2 = new javax.swing.JLabel();
		jSeparator1 = new javax.swing.JSeparator();
		jSeparator2 = new javax.swing.JSeparator();
		jSeparator3 = new javax.swing.JSeparator();
		CartaJugador2 = new javax.swing.JLabel();
		CartaJugador1 = new javax.swing.JLabel();
		jPanel1 = new javax.swing.JPanel();
		RankingB = new javax.swing.JButton();
		CiudadB = new javax.swing.JButton();
		RetoB = new javax.swing.JButton();
		RollDice = new javax.swing.JButton();
		LogOffB = new javax.swing.JButton();

		setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
		getContentPane().setLayout(null);

		Puntaje1.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
		Puntaje1.setForeground(new java.awt.Color(100, 100, 100));
		Puntaje1.setText("0");
		getContentPane().add(Puntaje1);
		Puntaje1.setBounds(150, 10, 60, 30);

		Username1.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
		Username1.setForeground(new java.awt.Color(100, 100, 100));
		Username1.setText("Username1");
		Username1.setForeground(Color.green);
		getContentPane().add(Username1);
		Username1.setBounds(10, 10, 140, 30);

		Username2.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
		Username2.setForeground(new java.awt.Color(100, 100, 100));
		Username2.setText("Username1");
		getContentPane().add(Username2);
		Username2.setBounds(220, 10, 140, 30);

		Puntaje2.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
		Puntaje2.setForeground(new java.awt.Color(100, 100, 100));
		Puntaje2.setText("0");
		getContentPane().add(Puntaje2);
		Puntaje2.setBounds(360, 10, 60, 30);

		jSeparator1.setOrientation(javax.swing.SwingConstants.VERTICAL);
		getContentPane().add(jSeparator1);
		jSeparator1.setBounds(420, -20, 10, 60);

		jSeparator2.setOrientation(javax.swing.SwingConstants.VERTICAL);
		getContentPane().add(jSeparator2);
		jSeparator2.setBounds(210, -20, 10, 60);
		getContentPane().add(jSeparator3);
		jSeparator3.setBounds(-40, 40, 740, 10);

		CartaJugador2.setBackground(new java.awt.Color(255, 50, 50));
		CartaJugador2.setText("Aqui van las cartas");
		CartaJugador2.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
		getContentPane().add(CartaJugador2);
		CartaJugador2.setBounds(870, 0, 150, 200);

		CartaJugador1.setBackground(new java.awt.Color(255, 50, 50));
		CartaJugador1.setText("Aqui van las cartas");
		CartaJugador1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
		getContentPane().add(CartaJugador1);
		CartaJugador1.setBounds(710, 0, 150, 200);
		getContentPane().add(jPanel1);
		jPanel1.setBounds(0, 50, 700, 680);

		RankingB.setText("Ranking");
		RankingB.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				RankingBActionPerformed(evt);
			}
		});
		getContentPane().add(RankingB);
		RankingB.setBounds(430, 0, 100, 40);

		CiudadB.setText("Elegir Ciudad");
		CiudadB.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				CiudadBActionPerformed(evt);
			}
		});
		getContentPane().add(CiudadB);
		CiudadB.setBounds(740, 200, 100, 23);

		RetoB.setText("Elegir Reto");
		RetoB.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				RetoBActionPerformed(evt);
			}
		});
		   addWindowListener(new java.awt.event.WindowAdapter() {
		        public void windowClosing(WindowEvent winEvt) {
		        	try {
						Game.getControl().SaveTree();
					} catch (IOException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
		        	System.exit(0);
		        }
		    });
		getContentPane().add(RetoB);
		RetoB.setBounds(890, 200, 100, 23);

		RollDice.setText("RollDice");
		RollDice.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				RollDiceActionPerformed(evt);
			}
		});
		getContentPane().add(RollDice);
		RollDice.setBounds(800, 530, 150, 170);

		LogOffB.setText("Log Off");
		LogOffB.addActionListener(new java.awt.event.ActionListener() {
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				try {
					LogOffBActionPerformed(evt);
				} catch (ClassNotFoundException | IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
		getContentPane().add(LogOffB);
		LogOffB.setBounds(540, 0, 100, 40);

		pack();
	}// </editor-fold>

	private void LogOffBActionPerformed(java.awt.event.ActionEvent evt) throws ClassNotFoundException, IOException {
		Game.logoffButton();
		dispose();

	}

	private void RankingBActionPerformed(java.awt.event.ActionEvent evt) {
		Game.rankingButton();
	}

	private void CiudadBActionPerformed(java.awt.event.ActionEvent evt) {
		Game.ciudadButton();
		CiudadB.setVisible(false);
		RollDice.setVisible(true);
	}

	private void RetoBActionPerformed(java.awt.event.ActionEvent evt) {
		Game.retoButton();
		CartaJugador1.setText("Debe Visitar "+Game.getPlayerActual().getReto().getCantidad() +" lugares de tipo: "+ Game.getPlayerActual().getReto().getTipo().toString());
		// TODO add your handling code here:
	}

	private void RollDiceActionPerformed(java.awt.event.ActionEvent evt) {
		Game.diceButton();
	}

	public void swichPlayer(){
		if(Username1.getForeground()==Color.green){
		Username1.setForeground(Color.green);
		Username2.setForeground(Color.black);
		}else{
			Username1.setForeground(Color.black);
			Username2.setForeground(Color.green);
			}
	}
	
	public void setPlayerLabel(String nameplayer,String nameplayer2){
		Username1.setText(nameplayer);
		Username2.setText(nameplayer2);
	}
	public void PanelMap(BufferedImage mapimage) {
		int h = mapimage.getHeight();
		int w = 500 * mapimage.getWidth() / h;

		//jPanel1.getGraphics().setColor(Color.BLACK);
		//jPanel1.getGraphics().drawRect(0, 0, 2000, 2000);
		//jPanel1.getGraphics().fillRect(0, 0, 2000, 2000);
		jPanel1.getGraphics().drawImage(mapimage, 0, 0, null);
	}

	/**
	 * @param args
	 *            the command line arguments
	 */

	// Variables declaration - do not modify
	private javax.swing.JLabel CartaJugador1;
	private javax.swing.JLabel CartaJugador2;
	private javax.swing.JButton CiudadB;
	private javax.swing.JButton LogOffB;
	private javax.swing.JLabel Puntaje1;
	private javax.swing.JLabel Puntaje2;
	private javax.swing.JButton RankingB;
	private javax.swing.JButton RetoB;
	private javax.swing.JButton RollDice;
	private javax.swing.JLabel Username1;
	private javax.swing.JLabel Username2;
	private javax.swing.JPanel jPanel1;
	private javax.swing.JSeparator jSeparator1;
	private javax.swing.JSeparator jSeparator2;
	private javax.swing.JSeparator jSeparator3;
	// End of variables declaration
}
